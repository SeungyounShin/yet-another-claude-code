<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <defs>
    <!-- Gradients -->
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f0f23"/>
      <stop offset="100%" style="stop-color:#1a1a2e"/>
    </linearGradient>
    <linearGradient id="cliGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <linearGradient id="agentGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f093fb"/>
      <stop offset="100%" style="stop-color:#f5576c"/>
    </linearGradient>
    <linearGradient id="middlewareGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe"/>
      <stop offset="100%" style="stop-color:#00f2fe"/>
    </linearGradient>
    <linearGradient id="toolsGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#43e97b"/>
      <stop offset="100%" style="stop-color:#38f9d7"/>
    </linearGradient>
    <linearGradient id="promptsGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fa709a"/>
      <stop offset="100%" style="stop-color:#fee140"/>
    </linearGradient>
    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#cc5333"/>
      <stop offset="100%" style="stop-color:#d4a574"/>
    </linearGradient>
    
    <!-- Shadow filter -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000" flood-opacity="0.3"/>
    </filter>
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M2,2 L10,6 L2,10 L4,6 Z" fill="#8b8b9e"/>
    </marker>
    <marker id="arrowGlow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M2,2 L10,6 L2,10 L4,6 Z" fill="#667eea"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="700" fill="url(#bgGrad)"/>
  
  <!-- Grid pattern -->
  <g opacity="0.03">
    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="white" stroke-width="1"/>
    </pattern>
    <rect width="900" height="700" fill="url(#grid)"/>
  </g>
  
  <!-- Title -->
  <text x="450" y="45" text-anchor="middle" font-family="SF Pro Display, -apple-system, sans-serif" font-size="28" font-weight="700" fill="white">
    <tspan fill="#667eea">yacc</tspan> Architecture
  </text>
  <text x="450" y="70" text-anchor="middle" font-family="SF Pro Display, -apple-system, sans-serif" font-size="14" fill="#8b8b9e">
    Yet Another Claude Code
  </text>

  <!-- CLI Layer -->
  <g filter="url(#shadow)">
    <rect x="100" y="100" width="700" height="90" rx="12" fill="url(#cliGrad)"/>
    <text x="130" y="135" font-family="SF Mono, monospace" font-size="18" font-weight="600" fill="white">CLI Layer</text>
    <text x="130" y="160" font-family="SF Mono, monospace" font-size="12" fill="rgba(255,255,255,0.8)">app.py</text>
    <text x="220" y="160" font-family="SF Mono, monospace" font-size="12" fill="rgba(255,255,255,0.6)">Interactive terminal interface</text>
    <text x="130" y="178" font-family="SF Mono, monospace" font-size="12" fill="rgba(255,255,255,0.8)">renderer.py</text>
    <text x="250" y="178" font-family="SF Mono, monospace" font-size="12" fill="rgba(255,255,255,0.6)">Rich output formatting</text>
    <!-- Terminal icon -->
    <g transform="translate(720, 120)">
      <rect width="60" height="50" rx="6" fill="rgba(0,0,0,0.3)"/>
      <text x="8" y="20" font-family="SF Mono, monospace" font-size="10" fill="#43e97b">‚ùØ</text>
      <rect x="18" y="14" width="30" height="3" rx="1" fill="#43e97b" opacity="0.7"/>
      <rect x="8" y="28" width="40" height="2" rx="1" fill="rgba(255,255,255,0.3)"/>
      <rect x="8" y="36" width="25" height="2" rx="1" fill="rgba(255,255,255,0.3)"/>
    </g>
  </g>

  <!-- Agent Core -->
  <g filter="url(#shadow)">
    <rect x="100" y="220" width="700" height="100" rx="12" fill="url(#agentGrad)"/>
    <text x="130" y="260" font-family="SF Mono, monospace" font-size="18" font-weight="600" fill="white">Agent Core</text>
    <text x="130" y="285" font-family="SF Mono, monospace" font-size="12" fill="rgba(255,255,255,0.8)">agent.py</text>
    <text x="220" y="285" font-family="SF Mono, monospace" font-size="12" fill="rgba(255,255,255,0.6)">Main orchestrator ‚Ä¢ API calls ‚Ä¢ Tool execution loop</text>
    <text x="130" y="303" font-family="SF Mono, monospace" font-size="12" fill="rgba(255,255,255,0.8)">AgentState</text>
    <text x="240" y="303" font-family="SF Mono, monospace" font-size="12" fill="rgba(255,255,255,0.6)">Conversation history ‚Ä¢ Token tracking ‚Ä¢ Todo list</text>
    <!-- Brain icon -->
    <g transform="translate(720, 240)">
      <circle cx="30" cy="30" r="28" fill="rgba(0,0,0,0.2)"/>
      <text x="30" y="38" text-anchor="middle" font-size="28">üß†</text>
    </g>
  </g>

  <!-- Arrow CLI -> Agent -->
  <path d="M450 190 L450 220" stroke="#8b8b9e" stroke-width="2" marker-end="url(#arrow)" opacity="0.6"/>

  <!-- Middle Layer: Middleware, Tools, Prompts -->
  <!-- Middleware -->
  <g filter="url(#shadow)">
    <rect x="100" y="360" width="210" height="160" rx="12" fill="#1e1e30"/>
    <rect x="100" y="360" width="210" height="40" rx="12" fill="url(#middlewareGrad)"/>
    <rect x="100" y="388" width="210" height="12" fill="#1e1e30"/>
    <text x="205" y="387" text-anchor="middle" font-family="SF Mono, monospace" font-size="14" font-weight="600" fill="white">Middleware</text>
    <g transform="translate(115, 415)">
      <circle cx="6" cy="6" r="4" fill="#4facfe"/>
      <text x="18" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">prompt_caching</text>
    </g>
    <g transform="translate(115, 440)">
      <circle cx="6" cy="6" r="4" fill="#00f2fe"/>
      <text x="18" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">summarization</text>
    </g>
    <g transform="translate(115, 465)">
      <circle cx="6" cy="6" r="4" fill="#38d9a9"/>
      <text x="18" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">patch_tool_calls</text>
    </g>
    <g transform="translate(115, 490)">
      <circle cx="6" cy="6" r="4" fill="#69db7c"/>
      <text x="18" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">base.py</text>
    </g>
  </g>

  <!-- Tools -->
  <g filter="url(#shadow)">
    <rect x="345" y="360" width="210" height="160" rx="12" fill="#1e1e30"/>
    <rect x="345" y="360" width="210" height="40" rx="12" fill="url(#toolsGrad)"/>
    <rect x="345" y="388" width="210" height="12" fill="#1e1e30"/>
    <text x="450" y="387" text-anchor="middle" font-family="SF Mono, monospace" font-size="14" font-weight="600" fill="white">Tools</text>
    <g transform="translate(360, 415)">
      <text x="0" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">üìÅ ls, glob, grep</text>
    </g>
    <g transform="translate(360, 440)">
      <text x="0" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">üìÑ read_file, write_file</text>
    </g>
    <g transform="translate(360, 465)">
      <text x="0" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">‚úèÔ∏è  edit_file</text>
    </g>
    <g transform="translate(360, 490)">
      <text x="0" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">üíª bash, write_todos</text>
    </g>
  </g>

  <!-- Prompts & Schemas -->
  <g filter="url(#shadow)">
    <rect x="590" y="360" width="210" height="160" rx="12" fill="#1e1e30"/>
    <rect x="590" y="360" width="210" height="40" rx="12" fill="url(#promptsGrad)"/>
    <rect x="590" y="388" width="210" height="12" fill="#1e1e30"/>
    <text x="695" y="387" text-anchor="middle" font-family="SF Mono, monospace" font-size="14" font-weight="600" fill="white">Prompts</text>
    <g transform="translate(605, 415)">
      <text x="0" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">system.py</text>
    </g>
    <g transform="translate(605, 438)">
      <text x="0" y="10" font-family="SF Mono, monospace" font-size="10" fill="#707080">‚Ä¢ Planning instructions</text>
    </g>
    <g transform="translate(605, 456)">
      <text x="0" y="10" font-family="SF Mono, monospace" font-size="10" fill="#707080">‚Ä¢ Filesystem guidelines</text>
    </g>
    <g transform="translate(605, 474)">
      <text x="0" y="10" font-family="SF Mono, monospace" font-size="10" fill="#707080">‚Ä¢ Tool usage rules</text>
    </g>
    <g transform="translate(605, 492)">
      <text x="0" y="10" font-family="SF Mono, monospace" font-size="11" fill="#a0a0b0">schemas/types.py</text>
    </g>
  </g>

  <!-- Arrows Agent -> Middle Layer -->
  <path d="M250 320 L205 360" stroke="#8b8b9e" stroke-width="2" marker-end="url(#arrow)" opacity="0.6"/>
  <path d="M450 320 L450 360" stroke="#8b8b9e" stroke-width="2" marker-end="url(#arrow)" opacity="0.6"/>
  <path d="M650 320 L695 360" stroke="#8b8b9e" stroke-width="2" marker-end="url(#arrow)" opacity="0.6"/>

  <!-- Claude API -->
  <g filter="url(#shadow)">
    <rect x="250" y="560" width="400" height="80" rx="12" fill="url(#apiGrad)"/>
    <text x="320" y="595" font-family="SF Mono, monospace" font-size="16" font-weight="600" fill="white">Anthropic Claude API</text>
    <text x="320" y="618" font-family="SF Mono, monospace" font-size="12" fill="rgba(255,255,255,0.7)">claude-sonnet-4.5</text>
    <!-- Anthropic logo placeholder -->
    <g transform="translate(560, 580)">
      <rect width="70" height="40" rx="8" fill="rgba(0,0,0,0.2)"/>
      <text x="35" y="27" text-anchor="middle" font-family="SF Pro Display, sans-serif" font-size="12" font-weight="600" fill="white">Claude</text>
    </g>
  </g>

  <!-- Arrows Middle -> API -->
  <path d="M205 520 L350 560" stroke="#8b8b9e" stroke-width="2" marker-end="url(#arrow)" opacity="0.6"/>
  <path d="M450 520 L450 560" stroke="#8b8b9e" stroke-width="2" marker-end="url(#arrow)" opacity="0.6"/>
  <path d="M695 520 L550 560" stroke="#8b8b9e" stroke-width="2" marker-end="url(#arrow)" opacity="0.6"/>

  <!-- Entry point badge -->
  <g filter="url(#glow)">
    <rect x="360" y="660" width="180" height="32" rx="16" fill="#667eea"/>
    <text x="450" y="682" text-anchor="middle" font-family="SF Mono, monospace" font-size="13" font-weight="600" fill="white">‚ñ∂ yacc / run.py</text>
  </g>

  <!-- Version badge -->
  <g transform="translate(820, 15)">
    <rect width="60" height="22" rx="11" fill="rgba(102,126,234,0.3)"/>
    <text x="30" y="15" text-anchor="middle" font-family="SF Mono, monospace" font-size="10" fill="#667eea">v0.1.0</text>
  </g>
</svg>
